<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src="jquery.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
  </head>
  <body>
    <main>
      <section class="titleSection">
        <container class="titleContainer">
          <h1>De Titanic</h1>
          <h5>Scroll om te beginnen</h5>
        </container>
      </section>
      <section class="genderSection">
        <h2>Verhouding tussen mannen en vrouwen op de boot</h2>
        <container class="genderContainer">
          <div class="genders">
            <div class="man">
              <div class="genderText">Man: <span class="malespan">ErrorA1</span></div>
              <img src="img/man.png" />
            </div>
            <div class="woman">
              <div class="genderText">Vrouw: <span class="womanspan">ErrorA1</span></div>
              <img src="img/woman.png" />
            </div>
          </div>
        </container>
      </section>
      <section class="ageSection">
        Ages
      </section>
    </main>
  </body>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script src="http://code.jquery.com/jquery-2.2.0.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
          $(this).scrollTop(0);
          var MaleCount = 0;
          var FemaleCount = 0;
          var ManProcent = 0;
          var FemaleProcent = 0;
          var totaal = 0;
          var Malemargin = 0;
          var Femalemargin = 0;
            $.ajax({
                        url: "json.json",
                        dataType: "json",
                        success: appendData // calls a function to handle the JSON data
                    }
            );
            /**
             * Appends new mobile OS data to the document.
             *
             * @param data  the JSON mobile usage data
             */

            function appendData(data) {

                // in the property 'os' there is the actual array with the usage data per operating system (OS)
                data.passagers.forEach(function (passagers) {
                  if (passagers["Sex"] == "male"){
                    MaleCount++;
                  }
                  else if (passagers["Sex"] == "female") {
                    FemaleCount++;
                  }

                    /* deze code is om alle personen van het schip te laten zien*/
                    // $('#content').append('<h2>' + passagers.Name + '</h2>')
                    //         .append('<h3>Leeftijd</h3><div class="bar">' + passagers["Age"] + '</div>')
                    //         .append('<h3>Geslacht</h3><div class="bar">' + passagers["Sex"] + '</div>')
                    //         .append('<h3>Locatie</h3><div class="bar">' + passagers["Embarked"] + '</div>');


                });
                var totaal = MaleCount+FemaleCount;
                var ManProcent = Math.ceil(MaleCount/totaal*100);
                var FemaleProcent = Math.ceil(FemaleCount/totaal*100);
                var Malemargin = 100 - ManProcent;
                var Femalemargin = 100 - FemaleProcent;
                $('.malespan').html(ManProcent + '%');
                $('.womanspan').html(FemaleProcent + '%');


                $( window ).scroll(function() {
                 if($(window).scrollTop() > 400 &&  $(window).scrollTop() < 1000){
                   $('.titleSection').fadeOut();
                   $('.genderSection').fadeIn();
                 }else if ($(window).scrollTop() > 600  &&  $(window).scrollTop() < 2500) {
                   $('.genderSection').fadeIn();
                   $('.man img').css({'width': ManProcent + '%'});
                   $('.genderText').css({'color': '#000'});
                   $('.woman img').css({'width': FemaleProcent + '%'});
                   $('.titleSection').fadeOut();
                 }else if ($(window).scrollTop() > 2100 ) {
                   $('.genderSection').fadeOut();
                   $('.ageSection').fadeIn();
                 }else{
                   $('.ageSection').fadeOut();
                   $('.genderSection').fadeOut();
                   $('.titleSection').fadeIn();
                 }
               })

            }
        });
    </script>
</html>
